# EdgeOne Pages 全功能反向代理

这是一个基于腾讯云 EdgeOne Pages 部署的通用反向代理项目。它严格遵循了经典 Cloudflare Workers 反向代理的设计模式，通过单一函数处理所有请求，以实现最大的稳定性和兼容性。

本项目允许您轻松部署一个无需服务器、自动扩缩容、全球加速的反向代理服务。您可以直接访问部署后的域名，在前端页面中输入目标网址进行代理，也可以通过 `域名/目标网址` 的格式直接访问。

## ✨ 功能特性

- **现代化界面**：采用 Tailwind CSS 构建，拥有美观、响应式的设计，并支持深色模式。
- **单一函数驱动**：整个应用由一个边缘函数驱动，包括渲染首页和处理代理请求，架构极简，逻辑内聚。
- **通用反向代理**：能够代理访问互联网上几乎任何网站。
- **无服务器化部署**：基于 EdgeOne Pages 边缘函数，无需购买和管理服务器。
- **关键问题修复**：内置了对 `Host` 头和跨域 `Set-Cookie` 问题的处理，解决了在代理复杂网站时遇到的核心障碍。

## 🚀 工作原理

本项目现在完全由一个位于 `functions/[[path]].js` 的**通配路由函数 (catch-all function)** 驱动，这与原始的 Cloudflare Worker 方案在逻辑上是等价的。

1.  **访问首页**：当您访问根域名 (`/`) 时，函数会判断路径为根路径，并直接返回一个内置的、现代化的 HTML 页面作为前端界面。
2.  **处理代理**：当您访问任何其他路径（如 `/https://example.com`）时，函数会将其识别为代理请求，解析出目标 URL，然后执行完整的代理逻辑，包括头部过滤和路径重写。

这种“照抄原作”的架构，消除了所有因平台路由优先级和文件分离导致的复杂性和不确定性。

## 部署指南 (通过 EdgeOne 网页控制台)

您无需在本地安装任何工具。只需一个 GitHub 账号和腾讯云账号即可完成所有操作。

### 前提条件

1.  拥有一个 [GitHub](https://github.com/) 账号。
2.  拥有一个已开通 [腾讯云 EdgeOne 服务](https://cloud.tencent.com/product/edgeone) 的腾讯云账号。

### 部署步骤

1.  **Fork 本项目**
    点击本仓库右上角的 **Fork** 按钮，将此项目复刻到您自己的 GitHub 账户下。

2.  **登录 EdgeOne 控制台**
    访问 [腾讯云 EdgeOne 控制台](https://console.cloud.tencent.com/edgeone)。

3.  **新建 Pages 站点**
    - 在左侧菜单中，选择 **站点服务** > **Pages**。
    - 点击 **新建站点** 按钮。

4.  **关联 GitHub 仓库**
    - 在部署方式中，选择 **关联 Git 仓库进行部署**。
    - 点击 **授权 Pages**，在弹出的窗口中授权腾讯云访问您的 GitHub 仓库。
    - 授权成功后，选择您刚刚 Fork 的仓库（`edgeone-proxy`）。

5.  **配置构建选项 (最终正确配置)**
    这是最关键的一步，请严格按照以下配置填写：
    - **项目名称**：自定义，例如 `my-proxy`。
    - **生产分支**：选择 `main` 或者您仓库的默认分支。
    - **构建框架预设**：选择 **`其他`**。
    - **构建命令**：**`留空`**。
    - **根目录**：保持默认的 **`./`** 即可。
    - **输出目录**：**`留空`** (因为我们不再需要托管任何静态文件)。
    - **环境变量**：无需填写。

6.  **保存并部署**
    - 点击 **保存并部署**。
    - EdgeOne Pages 会开始拉取您的代码并进行部署。这个过程通常在 1 分钟内完成。

7.  **访问您的代理**
    - 部署成功后，平台会自动生成一个 `.edgeonepage.com` 的免费域名。
    - 点击该域名，即可访问您的反向代理服务！

## 🔧 使用方法

部署成功后，您可以通过以下两种方式使用：

1.  **通过首页访问**
    - 直接访问您的域名，例如 `https://my-proxy-xxxx.edgeonepage.com`。
    - 在输入框中填入您想代理的目标网址（如 `https://www.google.com`），点击 **开始代理**。

2.  **通过 URL 直接访问**
    - 在您的域名后直接拼接上要代理的 URL 即可。
    - 格式：`https://<您的域名>/<目标URL>`
    - 示例：`https://my-proxy-xxxx.edgeonepage.com/https://www.typescriptlang.org/`

## ⚠️ 免责声明

- 本项目仅供学习和研究使用，作者不对任何因使用本项目而导致的任何问题负责，包括但不限于数据丢失、服务中断、法律纠纷等。
- 使用者需了解，本项目可能被用于访问受限内容或进行未经授权的活动。作者强烈反对任何不当使用行为，并鼓励使用者在合法合规的前提下使用。
- 请确保您拥有对所代理的目标地址的合法访问权限。
- 任何使用者在使用本项目时，需自行承担全部风险。作者和腾讯云不对任何滥用、不当使用或由此导致的任何损害承担责任。

## 📁 项目结构

```
.
├── functions/
│   └── [[path]].js   # 唯一的边缘函数，驱动整个应用
├── LICENSE           # MIT 许可证文件
└── README.md         # 本说明文件
```

## 📄 许可证

本项目采用 [MIT License](./LICENSE)。

## 🙏 致谢

- 本项目基于 [Cloudflare-Workers-Proxy](https://github.com/ymyuuu/Cloudflare-Workers-Proxy) 的优秀设计。